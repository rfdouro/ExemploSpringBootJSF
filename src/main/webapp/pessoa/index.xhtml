<f:view xmlns="http://www.w3c.org/1999/xhtml"
        xmlns:f="http://java.sun.com/jsf/core"
        xmlns:h="http://java.sun.com/jsf/html"
        xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
        xmlns:p="http://primefaces.org/ui">
 <h:head>
  <meta charset="utf-8"/>
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"/>
  <title>TO-DO application</title>
 </h:head>
 <h:body>
  <ui:composition template="../templates/LAYOUT01.xhtml">
   <ui:define name="main">
    <div>
     <p>Cadastro de pessoas!--</p>
    </div>

    <p:outputLabel for="nome" value="Nome: "/>
    <p:inputText id="nome" value="${pessoaService.pessoa.nome}"/>
    <p:commandButton value="Salvar" action="${pessoaService.salva}" update="tabela"/>
    <p:dataTable id="tabela" value="${pessoaService.todas}" var="p" emptyMessage="Sem registros">
     <p:column>
      <f:facet name="header">
       Ações
      </f:facet>
      <p:commandButton action="${pessoaService.exclui(p.id)}" value="Excluir" update="tabela"/>
      <p:commandButton value="Excluir" action="${pessoaService.seleciona(p.id)}" update="@form:dialogExclui" oncomplete="PF('dialogExclui').show();"/>
     </p:column>
     <p:column>
      <f:facet name="header">
       Id
      </f:facet>
      ${p.id}
     </p:column>
     <p:column>
      <f:facet name="header">
       Nome
      </f:facet>
      ${p.nome}
     </p:column>
    </p:dataTable>

    <p:dialog header="Confirmação" widgetVar="dialogExclui" id="dialogExclui" modal="true" appendTo="@(body)" minHeight="40">
     <h:outputText value="Confirma a exclusão? de ${pessoaService.pessoa.nome} ${pessoaService.pessoa.id}" />
     <br/>
     <p:commandButton value="Sim" action="${pessoaService.exclui()}" update="tabela" oncomplete="PF('dialogExclui').hide();" />
     <p:commandButton value="Não" action="${pessoaService.clear()}" onclick="PF('dialogExclui').hide();" />
    </p:dialog>

   </ui:define>
  </ui:composition>
 </h:body>
</f:view>

